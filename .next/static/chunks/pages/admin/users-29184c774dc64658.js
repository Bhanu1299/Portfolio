(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{6330:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return r(4003)}])},4003:function(e,s,r){"use strict";r.r(s),r.d(s,{__N_SSP:function(){return p},default:function(){return m}});var t=r(7568),n=r(6042),a=r(9396),l=r(7582),c=r(5893),i=r(7294),d=r(9383),u=r(4685),o=r(381),x=r(5147),h=r(9236),p=!0;function m(e){var s,r,p,m,f=e.initialUsers,j=(0,i.useState)(f),y=j[0],g=j[1],v=(0,i.useState)(!1),N=v[0],b=v[1],_=(0,i.useState)(""),w=_[0],C=_[1],A=(0,i.useState)(!1),Z=A[0],S=A[1],E=(0,i.useState)({email:"",name:"",role:"user",password:""}),U=E[0],k=E[1],F=(s=(0,t.Z)(function(){var e,s,r;return(0,l.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,fetch("/api/users")];case 1:if(!(e=s.sent()).ok)return[3,3];return[4,e.json()];case 2:g(s.sent()),s.label=3;case 3:return[3,5];case 4:return r=s.sent(),console.error("Error fetching users:",r),[3,5];case 5:return[2]}})}),function(){return s.apply(this,arguments)}),z=(r=(0,t.Z)(function(e){var s,r;return(0,l.__generator)(this,function(r){switch(r.label){case 0:e.preventDefault(),b(!0),C(""),r.label=1;case 1:return r.trys.push([1,6,7,8]),[4,fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)})];case 2:if(!(s=r.sent()).ok)return[3,3];return C("User created successfully!"),k({email:"",name:"",role:"user",password:""}),S(!1),F(),[3,5];case 3:return[4,s.json()];case 4:C(r.sent().message||"Failed to create user"),r.label=5;case 5:return[3,8];case 6:return r.sent(),C("Error creating user"),[3,8];case 7:return b(!1),[7];case 8:return[2]}})}),function(e){return r.apply(this,arguments)}),O=(p=(0,t.Z)(function(e,s){var r;return(0,l.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fetch("/api/users/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!s})})];case 1:return r.sent().ok?(F(),C("User ".concat(s?"deactivated":"activated"," successfully!"))):C("Failed to update user status"),[3,3];case 2:return r.sent(),C("Error updating user status"),[3,3];case 3:return[2]}})}),function(e,s){return p.apply(this,arguments)}),P=(m=(0,t.Z)(function(e){var s;return(0,l.__generator)(this,function(s){switch(s.label){case 0:if(!confirm("Are you sure you want to delete this user?"))return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch("/api/users/".concat(e),{method:"DELETE"})];case 2:return s.sent().ok?(F(),C("User deleted successfully!")):C("Failed to delete user"),[3,4];case 3:return s.sent(),C("Error deleting user"),[3,4];case 4:return[2]}})}),function(e){return m.apply(this,arguments)});return(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,c.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,c.jsx)(h.Uo,{children:(0,c.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,c.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage user accounts and permissions"})]}),(0,c.jsx)(u.z,{onClick:function(){return S(!Z)},children:Z?"Cancel":"Add New User"})]})}),Z&&(0,c.jsx)(h.Uo,{delay:.1,children:(0,c.jsxs)(d.Zb,{className:"mb-6",children:[(0,c.jsxs)(d.Ol,{children:[(0,c.jsx)(d.ll,{children:"Create New User"}),(0,c.jsx)(d.SZ,{children:"Add a new user to the system"})]}),(0,c.jsx)(d.aY,{children:(0,c.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(x._,{htmlFor:"name",children:"Name"}),(0,c.jsx)(o.I,{id:"name",value:U.name,onChange:function(e){return k(function(s){return(0,a.Z)((0,n.Z)({},s),{name:e.target.value})})},placeholder:"Full Name",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(x._,{htmlFor:"email",children:"Email"}),(0,c.jsx)(o.I,{id:"email",type:"email",value:U.email,onChange:function(e){return k(function(s){return(0,a.Z)((0,n.Z)({},s),{email:e.target.value})})},placeholder:"user@example.com",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(x._,{htmlFor:"password",children:"Password"}),(0,c.jsx)(o.I,{id:"password",type:"password",value:U.password,onChange:function(e){return k(function(s){return(0,a.Z)((0,n.Z)({},s),{password:e.target.value})})},placeholder:"Password",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(x._,{htmlFor:"role",children:"Role"}),(0,c.jsxs)("select",{id:"role",value:U.role,onChange:function(e){return k(function(s){return(0,a.Z)((0,n.Z)({},s),{role:e.target.value})})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,c.jsx)("option",{value:"user",children:"User"}),(0,c.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,c.jsx)(u.z,{type:"button",variant:"outline",onClick:function(){return S(!1)},children:"Cancel"}),(0,c.jsx)(u.z,{type:"submit",disabled:N,children:N?"Creating...":"Create User"})]})]})})]})}),(0,c.jsx)(h.Uo,{delay:.2,children:(0,c.jsxs)(d.Zb,{children:[(0,c.jsxs)(d.Ol,{children:[(0,c.jsxs)(d.ll,{children:["Users (",y.length,")"]}),(0,c.jsx)(d.SZ,{children:"Manage existing users"})]}),(0,c.jsx)(d.aY,{children:(0,c.jsxs)("div",{className:"overflow-x-auto",children:[(0,c.jsxs)("table",{className:"w-full table-auto",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{className:"border-b",children:[(0,c.jsx)("th",{className:"text-left py-2 px-4",children:"Name"}),(0,c.jsx)("th",{className:"text-left py-2 px-4",children:"Email"}),(0,c.jsx)("th",{className:"text-left py-2 px-4",children:"Role"}),(0,c.jsx)("th",{className:"text-left py-2 px-4",children:"Status"}),(0,c.jsx)("th",{className:"text-left py-2 px-4",children:"Created"}),(0,c.jsx)("th",{className:"text-left py-2 px-4",children:"Actions"})]})}),(0,c.jsx)("tbody",{children:y.map(function(e){return(0,c.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,c.jsx)("td",{className:"py-3 px-4 font-medium",children:e.name}),(0,c.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,c.jsx)("td",{className:"py-3 px-4",children:(0,c.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("admin"===e.role?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.role})}),(0,c.jsx)("td",{className:"py-3 px-4",children:(0,c.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,c.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"}),(0,c.jsx)("td",{className:"py-3 px-4",children:(0,c.jsxs)("div",{className:"flex space-x-2",children:[(0,c.jsx)(u.z,{size:"sm",variant:"outline",onClick:function(){return O(e._id,e.isActive)},children:e.isActive?"Deactivate":"Activate"}),(0,c.jsx)(u.z,{size:"sm",variant:"destructive",onClick:function(){return P(e._id)},children:"Delete"})]})})]},e._id)})})]}),0===y.length&&(0,c.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No users found. Create your first user above."})]})})]})}),w&&(0,c.jsx)(h.Uo,{delay:.3,children:(0,c.jsx)("div",{className:"mt-4 p-4 rounded-md ".concat(w.includes("successfully")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:w})})]})})}}},function(e){e.O(0,[199,229,774,888,179],function(){return e(e.s=6330)}),_N_E=e.O()}]);